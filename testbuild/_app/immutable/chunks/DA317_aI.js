import{w as r}from"./CyNfoSo1.js";const p=r({});let t=null;const d=r({lastSent:null,lastReceived:null});function w(){if(t)return;const s=window.location.protocol==="https:"?"wss":"ws",c=window.location.hostname,l=`${s}://${c}:18080/ws`;t=new WebSocket(l),t.onopen=()=>console.log("WebSocket connected to",l),t.onopen=()=>console.log("WebSocket connected"),t.onmessage=i=>{d.update(o=>({...o,lastReceived:i.data}));const e=i.data.trim();if(e.startsWith("0x90")||e.startsWith("0x80")){const o=e.substring(4,6),a=e.startsWith("0x90"),n=document.getElementById(`key_${o.toUpperCase()}`);n&&(a?(console.log("pressing.."),n.classList.add("pressed")):n.classList.remove("pressed"))}if(e.startsWith("0xB0")){const o=e.substring(4,6),a=parseInt(e.substring(6,8),16),n=`cc_${o}`;p.update(u=>({...u,[n]:a}))}}}function f(s){t&&t.readyState===WebSocket.OPEN?(d.update(c=>({...c,lastSent:s})),t.send(s)):console.warn("WebSocket is not open. Message not sent:",s)}function k(){t&&(t.close(),t=null)}function g(s){}export{p as a,g as b,w as c,k as d,f as s,d as w};
